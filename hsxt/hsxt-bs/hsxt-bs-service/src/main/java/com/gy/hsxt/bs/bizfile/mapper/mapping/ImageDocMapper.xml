<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.gy.hsxt.bs.bizfile.mapper.ImageDocMapper">	<resultMap type="com.gy.hsxt.bs.bean.bizfile.ImageDoc" id="imageDocResultMap">		<id property="docId" column="DOC_ID" />		<result property="docName" column="DOC_NAME" />		<result property="docType" column="DOC_TYPE" />		<result property="docCode" column="DOC_CODE" />		<result property="fileId" column="FILE_ID" />		<result property="status" column="STATUS" />		<result property="remark" column="REMARK" />		<result property="docVersion" column="DOC_VERSION" />		<result property="createdDate" column="CREATED_DATE" />		<result property="createdBy" column="CREATED_BY" />		<result property="updatedDate" column="UPDATED_DATE" />		<result property="updatedBy" column="UPDATED_BY" />		<result property="isActive" column="IS_ACTIVE" />	</resultMap>	<!-- 插入示例图片 -->	<insert id="insertImageDoc" parameterType="com.gy.hsxt.bs.bean.bizfile.ImageDoc">		INSERT INTO		T_BS_IMAGE_DOC		(		DOC_ID,		DOC_NAME,		DOC_TYPE,		DOC_CODE,		FILE_ID,		STATUS,		REMARK,		DOC_VERSION,		CREATED_DATE,		CREATED_BY,		IS_ACTIVE		)		VALUES		(		#{docId},		#{docName},		#{docType},		#{docCode},		#{fileId},		1,		#{remark},		#{docVersion},		sysdate,		#{createdBy},		1		)	</insert>	<!-- 获取示例图片管理列表不分页 -->	<select id="findImageDocList" resultMap="imageDocResultMap">		select * from		T_BS_IMAGE_DOC		<where>			<if test="status!=null">				and STATUS = #{status}			</if>			<if test="status == null">				and IS_ACTIVE = 1			</if>		</where>		order by CREATED_DATE desc	</select>	<!-- 获取历史版本 -->	<select id="findImageDocHis" resultMap="imageDocResultMap">		select * from		T_BS_IMAGE_DOC		where		DOC_CODE = #{docCode}		order by CREATED_DATE desc	</select>	<!-- 删除文档 -->	<delete id="deleteImageDoc">		delete		from		T_BS_IMAGE_DOC		where		DOC_CODE = #{docId}	</delete>	<!-- 修改文档状态 -->	<update id="updateImageDocStatus">		update T_BS_IMAGE_DOC		set			STATUS = #{status},			IS_ACTIVE = #{isActive}		where		DOC_ID = #{docId}	</update>		<!-- 修改文档活动状态 -->	<update id="updateImageDocActive">		update T_BS_IMAGE_DOC		set		IS_ACTIVE = #{isActive},		STATUS = 3		where		DOC_CODE = #{docCode}	</update>	<!-- 停用文档 -->	<update id="updateGroupDocStatus">		update T_BS_IMAGE_DOC		set		STATUS = 3		where		DOC_CODE =		#{docCode}	</update>		<!-- 更新修改时间和修改人 -->	<update id="updateTimeAndBy">		update T_BS_IMAGE_DOC		set		UPDATED_DATE=sysdate,		UPDATED_BY = #{updateBy}		where		DOC_ID = #{docId}	</update>		<!-- 更新修改时间 -->	<update id="updateStopTimeByCode">		update T_BS_IMAGE_DOC		<set>			UPDATED_DATE=sysdate,			<if test="updateBy!=null and updateBy!=''">			UPDATED_BY = #{updateBy}			</if>		</set>		where		DOC_CODE = #{docCode} and UPDATED_DATE is null	</update>	<!-- 查询正常的文档 -->	<select id="findNormalDoc" resultMap="imageDocResultMap">		select * from		T_BS_IMAGE_DOC		where		STATUS = 2		and		DOC_CODE = #{docCode}	</select>	<!-- 查询正常状态文档 -->	<select id="findNormalStatus" resultType="int">		select count(*) from		T_BS_IMAGE_DOC		where		STATUS = 2		and		DOC_CODE = #{docCode}	</select>	<!-- 查询文档详情 -->	<select id="findImageDocInfo" resultMap="imageDocResultMap">		select * from		T_BS_IMAGE_DOC		where		DOC_ID = #{docId}	</select>	<!-- 查询是否存在该标识 -->	<select id="findExistsDocCode" resultType="int">		select count(*) from		T_BS_IMAGE_DOC		where		DOC_CODE = #{docCode}	</select></mapper>